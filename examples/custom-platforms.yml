# Example with custom platform matrix (like zdpk/actions)
# Place this file in .github/workflows/ in your Rust project

name: Custom Platform Release

on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    uses: xctions/rust-release/.github/workflows/reusable-rust-release.yml@v2
    with:
      binaries: 'my-app'
      release-tag: ${{ github.ref_name }}
      
      # Custom platform matrix - only build specific targets
      include: |
        [
          {
            "target": "x86_64-unknown-linux-gnu",
            "os": "ubuntu-latest",
            "platform": "linux-x86_64"
          },
          {
            "target": "x86_64-unknown-linux-musl",
            "os": "ubuntu-latest",
            "platform": "linux-x86_64-musl"
          },
          {
            "target": "aarch64-apple-darwin",
            "os": "macos-latest",
            "platform": "mac-arm64"
          },
          {
            "target": "x86_64-pc-windows-msvc",
            "os": "windows-latest",
            "platform": "windows-x86_64"
          }
        ]
      
      rust-version: 'stable'
      cargo-args: '--release'
      generate-checksums: true
      create-archives: true
    secrets:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}